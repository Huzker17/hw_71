@model Summary
<h2>Создание резюме</h2>

<form >
    <div asp-validation-summary="ModelOnly"></div>
    <div>
        <label for="UserName">Имя </label><br />
        <input id="UserName" />
    </div>
    <div>
        <label for="Surname">Фамилия</label><br />
        <input id="Surname" />
    </div>
    <div>
        <label for="Number">Номер</label><br />
        <input id="Number" />
    </div>
    <div>
        <label for="City">Город</label><br />
        <input id="City" />
    </div>
    <div>
        <label for="Citizen">Гражданство</label><br />
        <input id="Citizen" />
    </div>
    <div id="works">
    </div>
    <div>
        <a class="btn btn-sm btn-primary" data-toggle="modal" data-target="#myModal">Добавить</a>
    </div>
    <div>
        <input type="submit" id="btnSaveData" value="Сохранить" />
    </div>
</form>
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div>
                    <label for="name">Имя компании</label><br />
                    <input type="text" id="name" />
                </div>
                <div>
                    <label for="spec">Специальность</label><br />
                    <input type="text" id="spec" />
                </div>
                <div>
                    <input type="button" id="btnAdd" value="Добавить" class="btn" />
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>
@section scripts{

    <script>

        $(document).ready(function () {
            $("#btnAdd").click(function () {
                AddWorkExp();
            });
            $("#btnSaveData").click(function () {
                SaveData();
            });
        });
        function AddWorkExp() {
            var workHtml = '<div class="card" style="width: 18rem;"><span class ="card-body">' + $("#name").val() + '<p class="card-text">' + $("#spec").val() + '</p>' + '</span> </div>';
            $("#works").last().append(workHtml);
        }
        function SaveData() {
            var ListOfWorks = new Array();
            var ListOfEdu = new Array();
            var Summary = {};
            Summary.Name = $("#UserName").val();
            Summary.Surname = $("#Surname").val();
            Summary.Number = $("#Number").val();
            Summary.City = $("#City").val();
            Summary.Citizen = $("#Citizen").val();
            console.log(Summary);
            $("#works").find("div").each(function () {
                var Name = $(this).find("span").text();
                var Spec = $(this).find("p").text();
                var WorkExp = {};
                WorkExp.Name = Name;
                WorkExp.Spec = Spec;
                ListOfWorks.push(WorkExp);
            });

            $.post('@Url.Action("Create", "Summary")',
                {
                Summary: Summary,
                ListOfWorks: ListOfWorks,
                    },
                    function (response) {
                        console.log(response)
                    
            });
        }
    </script>

}
